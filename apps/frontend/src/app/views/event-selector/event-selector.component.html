<div class="event-selector-container">
  <!-- Topbar -->
  <div class="topbar">
    <div class="topbar-left">
      <img src="assets/images/logo/logo-lumio-congressos-blue.png" alt="Lumio Congressos" class="topbar-logo">
    </div>

    <div class="topbar-center"></div>

    <div class="topbar-right">
      <a href="/eventos-disponiveis" class="topbar-link">
        <i class="far fa-calendar-plus"></i>
        <span>{{ 'COMMON.VIEW_AVAILABLE_EVENTS' | translate }}</span>
      </a>
      <a href="/area-congressista/minhas-inscricoes" class="topbar-link">
        <i class="far fa-file-alt"></i>
        <span>{{ 'COMMON.MY_REGISTRATIONS' | translate }}</span>
      </a>

      <app-language-switcher></app-language-switcher>

      <button (click)="logout()" class="logout-btn">
        {{ 'COMMON.LOGOUT' | translate }}
      </button>
    </div>
  </div>

  @if (isLoading()) {
  <app-loader />
  } @else if (errorMessage()) {
  <div class="error-message">
    <i class="fas fa-exclamation-circle"></i>
    <p>{{ errorMessage() }}</p>
  </div>
  } @else {
  <div class="event-selector-content">
    <header class="selector-header">
      <h1>{{ 'EVENT_SELECTOR.TITLE' | translate }}</h1>
      <p class="subtitle">{{ 'EVENT_SELECTOR.SUBTITLE' | translate }}</p>
    </header>

    @if (userEvents().length > 0) {
    <section class="events-section">
      <h2 class="section-title">{{ 'EVENT_SELECTOR.YOUR_EVENTS' | translate }}</h2>
      <div class="events-grid">
        @for (userEvent of userEvents(); track userEvent.evento.id) {
        <div class="event-card">
          <div class="event-card-header">
            <h3 class="event-title">{{ userEvent.evento.nome }}</h3>
            <span class="role-badge" [class]="getRoleBadgeClass(userEvent.role)">
              {{ 'EVENT_SELECTOR.ROLE_' + userEvent.role.toUpperCase() | translate }}
            </span>
          </div>
          <div class="event-card-body">
            <p class="event-theme"><i class="fas fa-tag"></i> {{ userEvent.evento.tema }}</p>
            <p class="event-languages">
              <i class="fas fa-language"></i>
              {{ userEvent.evento.idiomas.join(', ').toUpperCase() }}
            </p>
            @if (userEvent.inscricaoId) {
            <p class="event-inscription">
              <i class="fas fa-ticket-alt"></i>
              {{ 'EVENT_SELECTOR.REGISTRATION_ID' | translate }}: {{ userEvent.inscricaoId }}
            </p>
            }
          </div>
          <div class="event-card-footer">
            <button class="btn-access" (click)="selectEvent(userEvent)">
              @if (userEvent.role === 'admin') {
              {{ 'EVENT_SELECTOR.BTN_ACCESS_ADMIN' | translate }}
              } @else {
              {{ 'EVENT_SELECTOR.BTN_ACCESS_USER' | translate }}
              }
              <i class="fas fa-arrow-right"></i>
            </button>
          </div>
        </div>
        }
      </div>
    </section>
    } @else {
    <section class="no-events-section">
      <div class="no-events-message">
        <i class="fas fa-calendar-times"></i>
        <h2>{{ 'EVENT_SELECTOR.NO_EVENTS_TITLE' | translate }}</h2>
        <p>{{ 'EVENT_SELECTOR.NO_EVENTS_MESSAGE' | translate }}
        </p>
      </div>

      <div class="available-events">
        <h2 class="section-title">{{ 'EVENT_SELECTOR.AVAILABLE_EVENTS' | translate }}</h2>
        <div class="events-grid">
          @for (evento of availableEvents(); track evento.id) {
          <div class="event-card available">
            <div class="event-card-header">
              <h3 class="event-title">{{ evento.nome }}</h3>
              <span class="badge-available">{{ 'EVENT_SELECTOR.BADGE_AVAILABLE' | translate }}</span>
            </div>
            <div class="event-card-body">
              <p class="event-theme"><i class="fas fa-tag"></i> {{ evento.tema }}</p>
              <p class="event-languages">
                <i class="fas fa-language"></i>
                {{ evento.idiomas.join(', ').toUpperCase() }}
              </p>
            </div>
            <div class="event-card-footer">
              <button class="btn-register" disabled>
                {{ 'EVENT_SELECTOR.BTN_REGISTER' | translate }}
                <i class="fas fa-user-plus"></i>
              </button>
            </div>
          </div>
          }
        </div>
      </div>
    </section>
    }
  </div>
  }
</div>